
## Docker Tutorial Part A: Retrieve an existing Docker image and deploy it locally.

These instructions are based on this [tutorial](https://learn.microsoft.com/en-us/training/modules/intro-to-containers/3-exercise-deploy-docker-image-locally).  "Exercise - Retrieve an existing Docker image and deploy it locally - Training | Microsoft Learn"

---

### üêã Pull a Docker image from a registry

```bash
# Pull the ASP.NET sample web app image from the Microsoft Container Registry
docker pull mcr.microsoft.com/dotnet/samples:aspnetapp
```

---

### üì¶ Show local images

```bash
# List all Docker images stored locally
docker image ls
```

---

### üöÄ Run a container in detached mode

```bash
# Start the pulled image as a container in the background, mapping port 8080 on the host to port 8080 in the container
docker run -d -p 8080:8080 mcr.microsoft.com/dotnet/samples:aspnetapp
```

---

### üìÑ View running containers

```bash
# List running Docker containers
docker ps
```

---

### üõë Stop a specific running container

```bash
# Stop the running container, replacing <NAME> with the actual container name
docker container stop <NAME>
```

---

### üìã View all containers (including stopped)

```bash
# List all containers, including those that have exited
docker ps -a
```

---

### üóëÔ∏è Remove a stopped container

```bash
# Remove the stopped container from your local Docker host, replacing <NAME> with the container name
docker container rm <NAME>
```

---

### üì¶ List images again

```bash
# List all Docker images currently available locally
docker image ls
```

---

### üóëÔ∏è Remove the pulled image

```bash
# Delete the ASP.NET sample image from your local machine
docker image rm mcr.microsoft.com/dotnet/samples:aspnetapp
```

---

‚úÖ These commands illustrate the full **local Docker workflow** from pulling an image, running and inspecting it, to stopping and cleaning up both containers and images. ([Microsoft Learn][1])

[1]: https://learn.microsoft.com/en-us/training/modules/intro-to-containers/3-exercise-deploy-docker-image-locally "Exercise - Retrieve an existing Docker image and deploy it locally - Training | Microsoft Learn"

## Docker Tutorial Part B: Modify and deploy a docker image locally

Below is a step-by-step instruction list that creates an image from an existing codebase by adding a Dockerfile.  The web-service is deployed locally.  Based on this tutorial(https://learn.microsoft.com/en-us/training/modules/intro-to-containers/5-exercise-create-custom-docker-image). ([Microsoft Learn][1])  

---

## Commands + what each is doing (Bash-friendly)

### 1) Download the sample web app source code

```bash
git clone https://github.com/MicrosoftDocs/mslearn-hotel-reservation-system.git
```

([Microsoft Learn][1])

---

### 2) Move into the `src` directory (where the .NET projects live)

```bash
cd mslearn-hotel-reservation-system/src
```

([Microsoft Learn][1])

---

### 3) Create a new empty `Dockerfile` (Bash replacement for `copy NUL Dockerfile`)

```bash
touch Dockerfile
```

([Microsoft Learn][1])

---

### 4) Open the Dockerfile in a terminal editor (Bash replacement for `notepad Dockerfile`)

Pick one:

```bash
nano Dockerfile
```

or

```bash
vim Dockerfile
```

(or `code Dockerfile` if you‚Äôre using VS Code / Codespaces)

([Microsoft Learn][1])

---

### 5) Paste the complete Dockerfile contents (combined into one instruction)

Paste the following into `Dockerfile`:

```dockerfile
FROM mcr.microsoft.com/dotnet/core/sdk:2.2
WORKDIR /src
COPY ["/HotelReservationSystem/HotelReservationSystem.csproj", "HotelReservationSystem/"]
COPY ["/HotelReservationSystemTypes/HotelReservationSystemTypes.csproj", "HotelReservationSystemTypes/"]
RUN dotnet restore "HotelReservationSystem/HotelReservationSystem.csproj"
COPY . .
WORKDIR "/src/HotelReservationSystem"
RUN dotnet build "HotelReservationSystem.csproj" -c Release -o /app
RUN dotnet publish "HotelReservationSystem.csproj" -c Release -o /app
EXPOSE 80
WORKDIR /app
ENTRYPOINT ["dotnet", "HotelReservationSystem.dll"]
```

([Microsoft Learn][1])

---

## Explanation of each Dockerfile line (what it does)

1. **`FROM mcr.microsoft.com/dotnet/core/sdk:2.2`**
   Uses Microsoft‚Äôs .NET Core SDK 2.2 image as the base (so `dotnet` build tools are available). ([Microsoft Learn][1])

2. **`WORKDIR /src`**
   Sets the working directory inside the image to `/src` (subsequent commands run relative to this). ([Microsoft Learn][1])

3. **`COPY ["/HotelReservationSystem/HotelReservationSystem.csproj", "HotelReservationSystem/"]`**
   Copies the main project file into the image (into `/src/HotelReservationSystem/`). ([Microsoft Learn][1])

4. **`COPY ["/HotelReservationSystemTypes/HotelReservationSystemTypes.csproj", "HotelReservationSystemTypes/"]`**
   Copies the library project file into the image (into `/src/HotelReservationSystemTypes/`). ([Microsoft Learn][1])

5. **`RUN dotnet restore "HotelReservationSystem/HotelReservationSystem.csproj"`**
   Restores NuGet dependencies for the main project (downloads required packages). ([Microsoft Learn][1])

6. **`COPY . .`**
   Copies the rest of the source tree from your local `src` directory into the image‚Äôs `/src`. ([Microsoft Learn][1])

7. **`WORKDIR "/src/HotelReservationSystem"`**
   Changes working directory to the main project folder. ([Microsoft Learn][1])

8. **`RUN dotnet build "HotelReservationSystem.csproj" -c Release -o /app`**
   Builds the project in Release mode and writes build outputs into `/app`. ([Microsoft Learn][1])

9. **`RUN dotnet publish "HotelReservationSystem.csproj" -c Release -o /app`**
   Publishes the app (produces deployable outputs; strips intermediate build artifacts) into `/app`. ([Microsoft Learn][1])

10. **`EXPOSE 80`**
    Documents that the container listens on port 80 (the app‚Äôs HTTP port). ([Microsoft Learn][1])

11. **`WORKDIR /app`**
    Sets working directory to `/app` (where the published binaries are). ([Microsoft Learn][1])

12. **`ENTRYPOINT ["dotnet", "HotelReservationSystem.dll"]`**
    Defines the command that runs when the container starts: launch the web app with `dotnet`. ([Microsoft Learn][1])

---

### 6) Build the Docker image from the Dockerfile (note the trailing `.`)

```bash
docker build -t reservationsystem .
```

([Microsoft Learn][1])

---

### 7) Verify the image exists in your local image store

```bash
docker image list
```

([Microsoft Learn][1])

---

### 8) Run the container in the background, mapping host port 8080 ‚Üí container port 80

```bash
docker run -p 8080:80 -d --name reservations reservationsystem
```

([Microsoft Learn][1])

(Then browse to `http://localhost:8080/api/reservations/1` per the tutorial.) ([Microsoft Learn][1])

---

### 9) Check container status (including stopped containers)

```bash
docker ps -a
```

([Microsoft Learn][1])

---

### 10) Stop the running container (graceful shutdown)

```bash
docker container stop reservations
```

([Microsoft Learn][1])

---

### 11) Remove the stopped container (cleanup)

```bash
docker rm reservations
```

([Microsoft Learn][1])

---

If you want, I can also provide a **modernized** version of that Dockerfile (multi-stage build, smaller runtime image) while keeping the tutorial behavior the same‚Äîhandy when you start containerizing bioinformatics APIs or workflow services.

[1]: https://learn.microsoft.com/en-us/training/modules/intro-to-containers/5-exercise-create-custom-docker-image "Exercise - Customize a Docker image to run your own web app - Training | Microsoft Learn"

